<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <title>Генератор фона</title>
    <meta name="description" content="Генерация и скачивание фона">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="/sources/site.css">
    <link rel="stylesheet" href="/sources/header.css">
    <link rel="stylesheet" href="/sources/footer.css">
    <link rel="stylesheet" href="/sources/loading.css">
    <link rel="stylesheet" href="/generator/style.css">
  </head>
  <body>
    <header id="header"></header>
    <main class="generator-page">
      <h1>Генератор фона</h1>
      <div class="generator-layout">
        <form id="bg-generator-form" class="generator-form">
          <label>
            <span>Ширина</span>
            <input type="number" id="bg-width" min="512" max="5000" step="1" value="2000">
          </label>
          <label>
            <span>Высота</span>
            <input type="number" id="bg-height" min="512" max="5000" step="1" value="2000">
          </label>
          <label>
            <span>Цвет фона (HEX)</span>
            <div class="color-input">
              <div class="color-swatch" id="bg-swatch"></div>
              <input type="text" id="bg-color" value="#000000" maxlength="7" spellcheck="false">
            </div>
          </label>
          <label>
            <span>Цвет иконок (HEX)</span>
            <div class="color-input">
              <div class="color-swatch" id="fg-swatch"></div>
              <input type="text" id="fg-color" value="#ffffff" maxlength="7" spellcheck="false">
            </div>
          </label>
          <label>
            <span>Прозрачность</span>
            <input type="number" id="bg-opacity" min="0.05" max="1" step="0.05" value="0.30">
          </label>
          <label>
            <span>Размер сетки и иконок</span>
            <input type="number" id="bg-cell" min="16" max="96" step="1" value="36">
          </label>
          <label>
            <span>Угол</span>
            <input type="number" id="bg-angle" min="-90" max="90" step="1" value="-15">
          </label>
          <label>
            <span>Seed (опц.)</span>
            <input type="number" id="bg-seed" min="1" step="1" placeholder="случайно">
          </label>
          <div class="form-actions">
            <button type="button" id="reset-form-btn">Сбросить по умолчанию</button>
          </div>
        </form>
        <aside class="tools-panel">
          <section class="preview-box">
            <p>Превью</p>
            <canvas id="bg-preview" width="100" height="100"></canvas>
          </section>
          <section class="picker-box hidden" id="picker-box">
            <div class="picker-header">
              <p>Колорпикер</p>
              <button type="button" id="close-picker-btn" aria-label="Закрыть">×</button>
            </div>
            <label>
              <span>Редактировать</span>
              <select id="color-target">
                <option value="bg-color">Фон</option>
                <option value="fg-color">Иконки</option>
              </select>
            </label>
            <div class="picker-area">
              <canvas id="picker-sv" width="220" height="160"></canvas>
              <canvas id="picker-hue-strip" width="24" height="160"></canvas>
            </div>
            <label>
              <span>Alpha иконок</span>
              <input type="range" id="picker-alpha" min="0.05" max="1" step="0.01" value="0.3">
            </label>
            <div class="picker-actions">
              <button type="button" id="random-color-btn">Случайный</button>
              <label class="extractor-upload">
                <span>Экстрактор</span>
                <input type="file" id="palette-image" accept="image/*">
              </label>
            </div>
            <section class="history-box">
              <p>История цветов (сохраняется после генерации)</p>
              <div id="color-history" class="color-history"></div>
            </section>
            <div id="extracted-palette" class="extracted-palette"></div>
          </section>
        </aside>
      </div>
      <a href="#" id="download-bg-jpeg" class="generate-btn">Сгенерировать и скачать</a>
    </main>
    <footer id="footer"></footer>
    <script type="module" src="/generator/main.js"></script>
  </body>
</html>
